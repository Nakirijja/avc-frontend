import{_ as p,i as h,a as i,o as m,b as s,q as b,d as u,s as l,v as a,u as g,m as n,t as f,j as _,w as v,p as y}from"./index-DSpDc2Ld.js";const w={name:"RegisterView",data(){return{form:{first_name:"",last_name:"",username:"",email:"",password:"",phone_number:"",agree_terms:!1},loading:!1,error:""}},methods:{async handleRegister(){this.loading=!0,this.error="";try{if(!this.form.agree_terms){this.error="Please agree to the terms and conditions.",this.loading=!1;return}if(this.form.password.length<8){this.error="Password must be at least 8 characters long.",this.loading=!1;return}const t={username:this.form.username,email:this.form.email,password:this.form.password,password_confirm:this.form.password,first_name:this.form.first_name,last_name:this.form.last_name,phone_number:this.form.phone_number||"",address:this.form.address||"",date_of_birth:this.form.date_of_birth||null},e=await y.auth.register(t);console.log("Registration successful:",e),this.$router.push({path:"/auth/login",query:{success:"Registration successful! Please log in."}})}catch(t){if(console.error("Registration error:",t),t.response&&t.response.data){const e=t.response.data;this.error=e.password?.[0]||e.password_confirm?.[0]||e.email?.[0]||e.username?.[0]||e.detail||"Registration failed. Please check your input."}else this.error="Registration failed. Please try again later."}finally{this.loading=!1}}}},x={class:"auth-page min-vh-100 d-flex align-items-center justify-content-center"},V={class:"container"},k={class:"row justify-content-center"},C={class:"col-md-8 col-lg-6"},P={class:"card shadow-lg border-0"},R={class:"card-body p-5"},X={class:"row"},q={class:"col-md-6"},U={class:"mb-3"},N={class:"col-md-6"},A={class:"mb-3"},S={class:"mb-3"},E={class:"mb-3"},j={class:"mb-3"},B={class:"mb-3"},M={class:"mb-3 form-check"},T=["disabled"],D={key:0,class:"spinner-border spinner-border-sm me-2"},I={key:0,class:"alert alert-danger mt-3"},F={class:"text-center mt-4"},J={class:"mb-0"};function L(t,e,z,G,o,d){const c=h("router-link");return m(),i("div",x,[s("div",V,[s("div",k,[s("div",C,[s("div",P,[s("div",R,[e[19]||(e[19]=s("div",{class:"text-center mb-4"},[s("i",{class:"fas fa-user-plus fa-3x text-primary mb-3"}),s("h2",{class:"h3 fw-bold"},"Join Angels Voices Choir"),s("p",{class:"text-muted"},"Create your account to get started")],-1)),s("form",{onSubmit:e[7]||(e[7]=b((...r)=>d.handleRegister&&d.handleRegister(...r),["prevent"]))},[s("div",X,[s("div",q,[s("div",U,[e[8]||(e[8]=s("label",{class:"form-label"},"First Name",-1)),l(s("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=r=>o.form.first_name=r),placeholder:"Enter your first name",required:""},null,512),[[a,o.form.first_name]])])]),s("div",N,[s("div",A,[e[9]||(e[9]=s("label",{class:"form-label"},"Last Name",-1)),l(s("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=r=>o.form.last_name=r),placeholder:"Enter your last name",required:""},null,512),[[a,o.form.last_name]])])])]),s("div",S,[e[10]||(e[10]=s("label",{class:"form-label"},"Username",-1)),l(s("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=r=>o.form.username=r),placeholder:"Choose a username",required:""},null,512),[[a,o.form.username]])]),s("div",E,[e[11]||(e[11]=s("label",{class:"form-label"},"Email Address",-1)),l(s("input",{type:"email",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=r=>o.form.email=r),placeholder:"your@email.com",required:""},null,512),[[a,o.form.email]])]),s("div",j,[e[12]||(e[12]=s("label",{class:"form-label"},"Password",-1)),l(s("input",{type:"password",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=r=>o.form.password=r),placeholder:"Create a password",required:"",minlength:"8"},null,512),[[a,o.form.password]]),e[13]||(e[13]=s("div",{class:"form-text"},"Password must be at least 8 characters long",-1))]),s("div",B,[e[14]||(e[14]=s("label",{class:"form-label"},"Phone Number",-1)),l(s("input",{type:"tel",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=r=>o.form.phone_number=r),placeholder:"+256 XXX XXX XXX"},null,512),[[a,o.form.phone_number]])]),s("div",M,[l(s("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":e[6]||(e[6]=r=>o.form.agree_terms=r),required:""},null,512),[[g,o.form.agree_terms]]),e[15]||(e[15]=s("label",{class:"form-check-label"},[n(" I agree to the "),s("a",{href:"#",class:"text-decoration-none"},"Terms of Service"),n(" and "),s("a",{href:"#",class:"text-decoration-none"},"Privacy Policy")],-1))]),s("button",{type:"submit",class:"btn btn-primary btn-lg w-100 py-3",disabled:o.loading},[o.loading?(m(),i("span",D)):u("",!0),n(" "+f(o.loading?"Creating Account...":"Create Account"),1)],8,T),o.error?(m(),i("div",I,[e[16]||(e[16]=s("i",{class:"fas fa-exclamation-circle me-2"},null,-1)),n(" "+f(o.error),1)])):u("",!0)],32),s("div",F,[s("p",J,[e[18]||(e[18]=n(" Already have an account? ",-1)),_(c,{to:"/auth/login",class:"text-decoration-none fw-semibold"},{default:v(()=>[...e[17]||(e[17]=[n(" Sign in here ",-1)])]),_:1})])])])])])])])])}const K=p(w,[["render",L],["__scopeId","data-v-25986047"]]);export{K as default};
