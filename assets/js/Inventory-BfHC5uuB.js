import{_ as y,a as r,o as d,b as e,t as l,q as f,d as u,s as a,v as m,y as c,l as g,F as h,r as I,E as p}from"./index-DSpDc2Ld.js";const F={name:"Inventory",data(){return{items:[],itemForm:{name:"",category:"sheet_music",quantity:1,condition:"good",location:"",description:"",image:null},editMode:!1,editingId:null,submitting:!1,successMessage:"",errorMessage:"",search:"",filterCategory:"",filterCondition:"",currentPage:1,totalPages:1,pageSize:10}},methods:{async loadItems(i=1){try{const t={page:i,page_size:this.pageSize};this.search&&(t.search=this.search),this.filterCategory&&(t.category=this.filterCategory),this.filterCondition&&(t.condition=this.filterCondition);const b=await p.get("/api/v1/inventory/items/",{params:t});this.items=b.data.results,this.totalPages=Math.ceil(b.data.count/this.pageSize),this.currentPage=i}catch(t){console.error(t)}},handleFileUpload(i){this.itemForm.image=i.target.files[0]},async submitItem(){this.submitting=!0,this.successMessage="",this.errorMessage="";const i=new FormData;for(const t in this.itemForm)this.itemForm[t]!==null&&i.append(t,this.itemForm[t]);try{this.editMode?(await p.put(`/api/v1/inventory/items/${this.editingId}/`,i,{headers:{"Content-Type":"multipart/form-data"}}),this.successMessage="Item updated successfully!"):(await p.post("/api/v1/inventory/items/",i,{headers:{"Content-Type":"multipart/form-data"}}),this.successMessage="Item added successfully!"),this.resetForm(),this.loadItems(this.currentPage)}catch(t){this.errorMessage=t.response?.data?.detail||"Failed to submit item."}finally{this.submitting=!1}},editItem(i){this.editMode=!0,this.editingId=i.id,this.itemForm={name:i.name,category:i.category,quantity:i.quantity,condition:i.condition,location:i.location,description:i.description,image:null},window.scrollTo({top:0,behavior:"smooth"})},resetForm(){this.editMode=!1,this.editingId=null,this.itemForm={name:"",category:"sheet_music",quantity:1,condition:"good",location:"",description:"",image:null},this.successMessage="",this.errorMessage=""},async deleteItem(i){if(confirm("Are you sure you want to delete this item?"))try{await p.delete(`/api/v1/inventory/items/${i}/`),this.successMessage="Item deleted successfully!",this.loadItems(this.currentPage)}catch{this.errorMessage="Failed to delete item."}},changePage(i){i<1||i>this.totalPages||this.loadItems(i)},formatDate(i){return i?new Date(i).toLocaleDateString():"-"}},mounted(){this.loadItems()}},C={class:"container py-5"},M={class:"card mb-5"},_={class:"card-header"},w={class:"mb-0"},P={class:"card-body"},k={class:"row mb-3"},U={class:"col-md-6"},x={class:"col-md-6"},q={class:"row mb-3"},S={class:"col-md-4"},V={class:"col-md-4"},D={class:"col-md-4"},N={class:"mb-3"},A={class:"mb-3"},z={class:"d-flex gap-2"},B=["disabled"],E={key:0,class:"alert alert-success mt-3"},L={key:1,class:"alert alert-danger mt-3"},O={class:"row mb-4"},T={class:"col-md-4 mb-2"},G={class:"col-md-4 mb-2"},H={class:"col-md-4 mb-2"},K={class:"table-responsive"},Q={class:"table table-bordered table-striped align-middle"},j={class:"text-capitalize"},J={class:"text-capitalize"},R=["onClick"],W=["onClick"],X={key:0},Y={"aria-label":"Page navigation",class:"mt-3 d-flex justify-content-between align-items-center"},Z=["disabled"],$=["disabled"];function tt(i,t,b,et,s,n){return d(),r("div",C,[t[30]||(t[30]=e("h1",{class:"mb-4"},"Inventory Management",-1)),e("div",M,[e("div",_,[e("h5",w,l(s.editMode?"Edit Item":"Add New Item"),1)]),e("div",P,[e("form",{onSubmit:t[8]||(t[8]=f((...o)=>n.submitItem&&n.submitItem(...o),["prevent"])),enctype:"multipart/form-data"},[e("div",k,[e("div",U,[t[17]||(t[17]=e("label",{class:"form-label"},"Name",-1)),a(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.itemForm.name=o),type:"text",class:"form-control",required:""},null,512),[[m,s.itemForm.name]])]),e("div",x,[t[19]||(t[19]=e("label",{class:"form-label"},"Category",-1)),a(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.itemForm.category=o),class:"form-select",required:""},[...t[18]||(t[18]=[g('<option value="sheet_music" data-v-b827ed9c>Sheet Music</option><option value="uniform" data-v-b827ed9c>Uniform</option><option value="instrument" data-v-b827ed9c>Instrument</option><option value="hymn_book" data-v-b827ed9c>Hymn Book</option><option value="file" data-v-b827ed9c>File</option>',5)])],512),[[c,s.itemForm.category]])])]),e("div",q,[e("div",S,[t[20]||(t[20]=e("label",{class:"form-label"},"Quantity",-1)),a(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.itemForm.quantity=o),type:"number",min:"1",class:"form-control",required:""},null,512),[[m,s.itemForm.quantity,void 0,{number:!0}]])]),e("div",V,[t[22]||(t[22]=e("label",{class:"form-label"},"Condition",-1)),a(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.itemForm.condition=o),class:"form-select",required:""},[...t[21]||(t[21]=[e("option",{value:"new"},"New",-1),e("option",{value:"good"},"Good",-1),e("option",{value:"fair"},"Fair",-1),e("option",{value:"poor"},"Poor",-1)])],512),[[c,s.itemForm.condition]])]),e("div",D,[t[23]||(t[23]=e("label",{class:"form-label"},"Location (Optional)",-1)),a(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.itemForm.location=o),type:"text",class:"form-control"},null,512),[[m,s.itemForm.location]])])]),e("div",N,[t[24]||(t[24]=e("label",{class:"form-label"},"Description (Optional)",-1)),a(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.itemForm.description=o),class:"form-control",rows:"3"},null,512),[[m,s.itemForm.description]])]),e("div",A,[t[25]||(t[25]=e("label",{class:"form-label"},"Image (Optional)",-1)),e("input",{type:"file",class:"form-control",onChange:t[6]||(t[6]=(...o)=>n.handleFileUpload&&n.handleFileUpload(...o)),accept:"image/*"},null,32)]),e("div",z,[e("button",{type:"submit",class:"btn btn-primary",disabled:s.submitting},l(s.submitting?s.editMode?"Updating...":"Adding...":s.editMode?"Update Item":"Add Item"),9,B),s.editMode?(d(),r("button",{key:0,type:"button",class:"btn btn-secondary",onClick:t[7]||(t[7]=(...o)=>n.resetForm&&n.resetForm(...o))},"Cancel")):u("",!0)]),s.successMessage?(d(),r("div",E,l(s.successMessage),1)):u("",!0),s.errorMessage?(d(),r("div",L,l(s.errorMessage),1)):u("",!0)],32)])]),e("div",O,[e("div",T,[a(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.search=o),onInput:t[10]||(t[10]=(...o)=>n.loadItems&&n.loadItems(...o)),type:"text",class:"form-control",placeholder:"Search by name, SKU, description..."},null,544),[[m,s.search]])]),e("div",G,[a(e("select",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.filterCategory=o),onChange:t[12]||(t[12]=(...o)=>n.loadItems&&n.loadItems(...o)),class:"form-select"},[...t[26]||(t[26]=[g('<option value="" data-v-b827ed9c>All Categories</option><option value="sheet_music" data-v-b827ed9c>Sheet Music</option><option value="uniform" data-v-b827ed9c>Uniform</option><option value="instrument" data-v-b827ed9c>Instrument</option><option value="hymn_book" data-v-b827ed9c>Hymn Book</option><option value="file" data-v-b827ed9c>File</option>',6)])],544),[[c,s.filterCategory]])]),e("div",H,[a(e("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.filterCondition=o),onChange:t[14]||(t[14]=(...o)=>n.loadItems&&n.loadItems(...o)),class:"form-select"},[...t[27]||(t[27]=[g('<option value="" data-v-b827ed9c>All Conditions</option><option value="new" data-v-b827ed9c>New</option><option value="good" data-v-b827ed9c>Good</option><option value="fair" data-v-b827ed9c>Fair</option><option value="poor" data-v-b827ed9c>Poor</option>',5)])],544),[[c,s.filterCondition]])])]),e("div",K,[e("table",Q,[t[29]||(t[29]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"SKU"),e("th",null,"Name"),e("th",null,"Category"),e("th",null,"Qty"),e("th",null,"Condition"),e("th",null,"Location"),e("th",null,"Added By"),e("th",null,"Added On"),e("th",null,"Actions")])],-1)),e("tbody",null,[(d(!0),r(h,null,I(s.items,o=>(d(),r("tr",{key:o.id},[e("td",null,l(o.sku),1),e("td",null,l(o.name),1),e("td",j,l(o.category),1),e("td",null,l(o.quantity),1),e("td",J,l(o.condition),1),e("td",null,l(o.location||"-"),1),e("td",null,l(o.added_by_name||"-"),1),e("td",null,l(n.formatDate(o.added_on)),1),e("td",null,[e("button",{onClick:v=>n.editItem(o),class:"btn btn-sm btn-warning me-1"},"Edit",8,R),e("button",{onClick:v=>n.deleteItem(o.id),class:"btn btn-sm btn-danger"},"Delete",8,W)])]))),128)),s.items.length===0?(d(),r("tr",X,[...t[28]||(t[28]=[e("td",{colspan:"9",class:"text-center py-3"},"No items found.",-1)])])):u("",!0)])])]),e("nav",Y,[e("button",{class:"btn btn-outline-secondary",onClick:t[15]||(t[15]=o=>n.changePage(s.currentPage-1)),disabled:s.currentPage===1},"Previous",8,Z),e("span",null,"Page "+l(s.currentPage)+" of "+l(s.totalPages),1),e("button",{class:"btn btn-outline-secondary",onClick:t[16]||(t[16]=o=>n.changePage(s.currentPage+1)),disabled:s.currentPage===s.totalPages},"Next",8,$)])])}const st=y(F,[["render",tt],["__scopeId","data-v-b827ed9c"]]);export{st as default};
