import{_ as w,a as t,o as i,b as r,d as n,t as l,q as u,s as m,v as p,p as c}from"./index-DSpDc2Ld.js";const h={name:"ResetPassword",data(){return{uid:this.$route.query.uid||"",token:this.$route.query.token||"",password:"",confirmPassword:"",message:"",error:"",loading:!1}},methods:{async handleResetPassword(){if(this.error="",this.message="",!this.uid||!this.token){this.error="❌ Invalid or expired password reset link.";return}if(this.password!==this.confirmPassword){this.error="❌ Passwords do not match.";return}this.loading=!0;try{await c.auth.resetPasswordConfirm({uid:this.uid,token:this.token,password:this.password}),this.message="✅ Password reset successful!"}catch(a){console.error(a),this.error=a.response?.data?.detail||a.response?.data?.non_field_errors?.[0]||"❌ Failed to reset password. The link may have expired."}finally{this.loading=!1}},goToLogin(){this.$router.push("/auth/login")}}},f={class:"reset-password-page d-flex align-items-center justify-content-center",style:{"min-height":"calc(100vh - 80px)"}},g={class:"card p-4 p-md-5 shadow-sm w-100",style:{"max-width":"400px"}},b={key:0,class:"text-success mb-3"},y={key:1,class:"text-danger mb-3"},P={class:"mb-3"},_={class:"mb-3"},k=["disabled"],v={key:3,class:"mt-3"};function x(a,s,R,q,e,d){return i(),t("div",f,[r("div",g,[s[6]||(s[6]=r("h2",{class:"text-center mb-4"},"Reset Password",-1)),e.message?(i(),t("p",b,l(e.message),1)):n("",!0),e.error?(i(),t("p",y,l(e.error),1)):n("",!0),e.message?n("",!0):(i(),t("form",{key:2,onSubmit:s[2]||(s[2]=u((...o)=>d.handleResetPassword&&d.handleResetPassword(...o),["prevent"]))},[r("div",P,[s[4]||(s[4]=r("label",{for:"password",class:"form-label"},"New Password",-1)),m(r("input",{id:"password","onUpdate:modelValue":s[0]||(s[0]=o=>e.password=o),type:"password",required:"",class:"form-control",placeholder:"Enter new password"},null,512),[[p,e.password]])]),r("div",_,[s[5]||(s[5]=r("label",{for:"confirmPassword",class:"form-label"},"Confirm Password",-1)),m(r("input",{id:"confirmPassword","onUpdate:modelValue":s[1]||(s[1]=o=>e.confirmPassword=o),type:"password",required:"",class:"form-control",placeholder:"Confirm new password"},null,512),[[p,e.confirmPassword]])]),r("button",{type:"submit",disabled:e.loading,class:"btn btn-primary w-100"},l(e.loading?"Resetting...":"Reset Password"),9,k)],32)),e.message?(i(),t("div",v,[r("button",{onClick:s[3]||(s[3]=(...o)=>d.goToLogin&&d.goToLogin(...o)),class:"btn btn-secondary w-100"},"Go to Login")])):n("",!0)])])}const T=w(h,[["render",x],["__scopeId","data-v-e8593b5b"]]);export{T as default};
