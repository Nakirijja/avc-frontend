import{_ as b,a as d,o as m,b as e,d as u,l as h,m as c,s as a,v as i,H as p,t as n,F as y,r as v}from"./index-DSpDc2Ld.js";const g={name:"CheckoutPage",data(){return{cart:[],customerInfo:{firstName:"",lastName:"",email:"",phone:"",address:"",city:"",postalCode:""},paymentMethod:"mtn",mobileMoneyPhone:"",cardInfo:{number:"",expiry:"",cvv:""},processing:!1,showSuccessModal:!1,orderId:this.generateOrderId(),shipping:5e3,taxRate:.18}},computed:{subtotal(){return this.cart.reduce((r,t)=>r+parseFloat(t.price)*t.quantity,0)},tax(){return this.subtotal*this.taxRate},total(){return this.subtotal+this.shipping+this.tax},canCheckout(){return this.cart.length>0&&this.customerInfo.firstName&&this.customerInfo.lastName&&this.customerInfo.email&&this.customerInfo.phone&&this.customerInfo.address&&this.customerInfo.city&&this.validatePaymentInfo()}},methods:{getProductImage(r){return r?r.startsWith("http")?r:`${r}`:"https://via.placeholder.com/60x60?text=Product"},handleImageError(r){r.target.src="https://via.placeholder.com/60x60?text=Product"},formatPrice(r){return parseFloat(r).toLocaleString("en-US")},validatePaymentInfo(){return this.paymentMethod==="mtn"||this.paymentMethod==="airtel"?this.mobileMoneyPhone.length>=10:this.paymentMethod==="card"?this.cardInfo.number&&this.cardInfo.expiry&&this.cardInfo.cvv:!1},async processOrder(){if(this.canCheckout){this.processing=!0;try{await new Promise(t=>setTimeout(t,3e3));const r={id:this.orderId,customer:this.customerInfo,items:this.cart,payment:{method:this.paymentMethod,amount:this.total},timestamp:new Date().toISOString()};this.saveOrder(r),localStorage.removeItem("avc_shop_cart"),this.showSuccessModal=!0}catch(r){console.error("Order processing error:",r),alert("There was an error processing your order. Please try again.")}finally{this.processing=!1}}},saveOrder(r){const t=JSON.parse(localStorage.getItem("avc_shop_orders")||"[]");t.push(r),localStorage.setItem("avc_shop_orders",JSON.stringify(t))},generateOrderId(){return"AVC"+Date.now().toString().slice(-8)},continueShopping(){this.showSuccessModal=!1,this.$router.push("/shop")},viewOrder(){this.showSuccessModal=!1,alert(`Order details for ${this.orderId} would be shown here.`)}},mounted(){const r=localStorage.getItem("avc_shop_cart");r&&(this.cart=JSON.parse(r)),this.cart.length===0&&this.$router.push("/shop")}},x={class:"checkout-container"},I={class:"checkout-header bg-primary text-white py-4"},k={class:"container"},M={class:"row align-items-center"},w={class:"col-auto"},_={class:"container py-5"},C={class:"row"},S={class:"col-lg-8"},N={key:0,class:"empty-cart text-center py-5"},P={key:1},X={class:"card mb-4"},V={class:"card-body"},O={class:"row"},U={class:"col-md-6 mb-3"},q={class:"col-md-6 mb-3"},T={class:"mb-3"},A={class:"mb-3"},D={class:"card mb-4"},E={class:"card-body"},Y={class:"mb-3"},G={class:"row"},j={class:"col-md-6 mb-3"},F={class:"col-md-6 mb-3"},B={class:"card"},J={class:"card-body"},L={class:"mb-3"},R={class:"form-check mb-3"},H={class:"form-check mb-3"},Q={class:"form-check"},W={key:0,class:"payment-details"},z={class:"mb-3"},K=["for"],Z=["id","placeholder"],$={key:1,class:"payment-details"},ee={class:"mb-3"},te={class:"row"},se={class:"col-md-6 mb-3"},oe={class:"col-md-6 mb-3"},re={class:"col-lg-4"},le={class:"card sticky-top",style:{top:"20px"}},ae={class:"card-body"},ie=["src","alt"],ne={class:"flex-grow-1"},de={class:"mb-1"},me={class:"text-muted small mb-1"},ce={class:"text-primary fw-bold mb-0"},ue={class:"order-totals"},pe={class:"d-flex justify-content-between mb-2"},fe={class:"d-flex justify-content-between mb-2"},be={class:"d-flex justify-content-between mb-2"},he={class:"d-flex justify-content-between mb-3"},ye={class:"text-primary"},ve=["disabled"],ge={key:0,class:"spinner-border spinner-border-sm me-2"},xe={key:1,class:"fas fa-lock me-2"},Ie={key:0,class:"modal fade show d-block",tabindex:"-1"},ke={class:"modal-dialog modal-dialog-centered"},Me={class:"modal-content"},we={class:"modal-body text-center py-4"},_e={class:"mb-2"},Ce={class:"text-muted"},Se={class:"modal-footer border-0 justify-content-center"};function Ne(r,t,Pe,Xe,s,l){return m(),d("div",x,[e("section",I,[e("div",k,[e("div",M,[t[21]||(t[21]=h('<div class="col" data-v-8335eaa9><h1 class="h3 mb-0" data-v-8335eaa9>Checkout</h1><nav aria-label="breadcrumb" data-v-8335eaa9><ol class="breadcrumb mb-0" data-v-8335eaa9><li class="breadcrumb-item" data-v-8335eaa9><a href="/shop" class="text-white-50" data-v-8335eaa9>Shop</a></li><li class="breadcrumb-item" data-v-8335eaa9><a href="#" class="text-white-50" data-v-8335eaa9>Cart</a></li><li class="breadcrumb-item active text-white" data-v-8335eaa9>Checkout</li></ol></nav></div>',1)),e("div",w,[e("button",{onClick:t[0]||(t[0]=o=>r.$router.back()),class:"btn btn-outline-light"},[...t[20]||(t[20]=[e("i",{class:"fas fa-arrow-left"},null,-1),c(" Back to Shop ",-1)])])])])])]),e("div",_,[e("div",C,[e("div",S,[s.cart.length===0?(m(),d("div",N,[t[22]||(t[22]=e("i",{class:"fas fa-shopping-cart fa-4x text-muted mb-4"},null,-1)),t[23]||(t[23]=e("h3",{class:"text-muted"},"Your cart is empty",-1)),t[24]||(t[24]=e("p",{class:"text-muted mb-4"},"Add some items to your cart before checking out",-1)),e("button",{onClick:t[1]||(t[1]=o=>r.$router.push("/shop")),class:"btn btn-primary btn-lg"}," Continue Shopping ")])):(m(),d("div",P,[e("div",X,[t[29]||(t[29]=e("div",{class:"card-header bg-light"},[e("h5",{class:"card-title mb-0"},[e("i",{class:"fas fa-user me-2"}),c("Customer Information ")])],-1)),e("div",V,[e("div",O,[e("div",U,[t[25]||(t[25]=e("label",{for:"firstName",class:"form-label"},"First Name *",-1)),a(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.customerInfo.firstName=o),type:"text",class:"form-control",id:"firstName",required:""},null,512),[[i,s.customerInfo.firstName]])]),e("div",q,[t[26]||(t[26]=e("label",{for:"lastName",class:"form-label"},"Last Name *",-1)),a(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.customerInfo.lastName=o),type:"text",class:"form-control",id:"lastName",required:""},null,512),[[i,s.customerInfo.lastName]])])]),e("div",T,[t[27]||(t[27]=e("label",{for:"email",class:"form-label"},"Email Address *",-1)),a(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.customerInfo.email=o),type:"email",class:"form-control",id:"email",required:""},null,512),[[i,s.customerInfo.email]])]),e("div",A,[t[28]||(t[28]=e("label",{for:"phone",class:"form-label"},"Phone Number *",-1)),a(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.customerInfo.phone=o),type:"tel",class:"form-control",id:"phone",required:""},null,512),[[i,s.customerInfo.phone]])])])]),e("div",D,[t[33]||(t[33]=e("div",{class:"card-header bg-light"},[e("h5",{class:"card-title mb-0"},[e("i",{class:"fas fa-truck me-2"}),c("Shipping Address ")])],-1)),e("div",E,[e("div",Y,[t[30]||(t[30]=e("label",{for:"address",class:"form-label"},"Street Address *",-1)),a(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.customerInfo.address=o),type:"text",class:"form-control",id:"address",required:""},null,512),[[i,s.customerInfo.address]])]),e("div",G,[e("div",j,[t[31]||(t[31]=e("label",{for:"city",class:"form-label"},"City *",-1)),a(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.customerInfo.city=o),type:"text",class:"form-control",id:"city",required:""},null,512),[[i,s.customerInfo.city]])]),e("div",F,[t[32]||(t[32]=e("label",{for:"postalCode",class:"form-label"},"Postal Code",-1)),a(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.customerInfo.postalCode=o),type:"text",class:"form-control",id:"postalCode"},null,512),[[i,s.customerInfo.postalCode]])])])])]),e("div",B,[t[41]||(t[41]=e("div",{class:"card-header bg-light"},[e("h5",{class:"card-title mb-0"},[e("i",{class:"fas fa-credit-card me-2"}),c("Payment Method ")])],-1)),e("div",J,[e("div",L,[e("div",R,[a(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.paymentMethod=o),value:"mtn",class:"form-check-input",type:"radio",id:"mtn"},null,512),[[p,s.paymentMethod]]),t[34]||(t[34]=e("label",{class:"form-check-label d-flex align-items-center",for:"mtn"},[e("span",{class:"payment-badge mtn-badge me-2"},"MTN"),c(" MTN Mobile Money ")],-1))]),e("div",H,[a(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.paymentMethod=o),value:"airtel",class:"form-check-input",type:"radio",id:"airtel"},null,512),[[p,s.paymentMethod]]),t[35]||(t[35]=e("label",{class:"form-check-label d-flex align-items-center",for:"airtel"},[e("span",{class:"payment-badge airtel-badge me-2"},"Airtel"),c(" Airtel Money ")],-1))]),e("div",Q,[a(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.paymentMethod=o),value:"card",class:"form-check-input",type:"radio",id:"card"},null,512),[[p,s.paymentMethod]]),t[36]||(t[36]=e("label",{class:"form-check-label d-flex align-items-center",for:"card"},[e("i",{class:"fas fa-credit-card me-2"}),c(" Credit/Debit Card ")],-1))])]),s.paymentMethod==="mtn"||s.paymentMethod==="airtel"?(m(),d("div",W,[e("div",z,[e("label",{for:s.paymentMethod+"Phone",class:"form-label"},n(s.paymentMethod==="mtn"?"MTN":"Airtel")+" Phone Number * ",9,K),a(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.mobileMoneyPhone=o),type:"tel",class:"form-control",id:s.paymentMethod+"Phone",placeholder:(s.paymentMethod==="mtn","256 XXX XXX XXX"),required:""},null,8,Z),[[i,s.mobileMoneyPhone]]),t[37]||(t[37]=e("div",{class:"form-text"}," You will receive a prompt on your phone to complete the payment ",-1))])])):u("",!0),s.paymentMethod==="card"?(m(),d("div",$,[e("div",ee,[t[38]||(t[38]=e("label",{for:"cardNumber",class:"form-label"},"Card Number *",-1)),a(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.cardInfo.number=o),type:"text",class:"form-control",id:"cardNumber",placeholder:"1234 5678 9012 3456",required:""},null,512),[[i,s.cardInfo.number]])]),e("div",te,[e("div",se,[t[39]||(t[39]=e("label",{for:"expiry",class:"form-label"},"Expiry Date *",-1)),a(e("input",{"onUpdate:modelValue":t[14]||(t[14]=o=>s.cardInfo.expiry=o),type:"text",class:"form-control",id:"expiry",placeholder:"MM/YY",required:""},null,512),[[i,s.cardInfo.expiry]])]),e("div",oe,[t[40]||(t[40]=e("label",{for:"cvv",class:"form-label"},"CVV *",-1)),a(e("input",{"onUpdate:modelValue":t[15]||(t[15]=o=>s.cardInfo.cvv=o),type:"text",class:"form-control",id:"cvv",placeholder:"123",required:""},null,512),[[i,s.cardInfo.cvv]])])])])):u("",!0)])])]))]),e("div",re,[e("div",le,[t[48]||(t[48]=e("div",{class:"card-header bg-light"},[e("h5",{class:"card-title mb-0"},"Order Summary")],-1)),e("div",ae,[(m(!0),d(y,null,v(s.cart,o=>(m(),d("div",{key:o.id,class:"order-item d-flex mb-3 pb-3 border-bottom"},[e("img",{src:l.getProductImage(o.image),alt:o.name,class:"order-item-image me-3",onError:t[16]||(t[16]=(...f)=>l.handleImageError&&l.handleImageError(...f))},null,40,ie),e("div",ne,[e("h6",de,n(o.name),1),e("p",me,"Qty: "+n(o.quantity),1),e("p",ce,"UGX "+n(l.formatPrice(o.price*o.quantity)),1)])]))),128)),e("div",ue,[e("div",pe,[t[42]||(t[42]=e("span",{class:"text-muted"},"Subtotal:",-1)),e("span",null,"UGX "+n(l.formatPrice(l.subtotal)),1)]),e("div",fe,[t[43]||(t[43]=e("span",{class:"text-muted"},"Shipping:",-1)),e("span",null,"UGX "+n(l.formatPrice(s.shipping)),1)]),e("div",be,[t[44]||(t[44]=e("span",{class:"text-muted"},"Tax:",-1)),e("span",null,"UGX "+n(l.formatPrice(l.tax)),1)]),t[46]||(t[46]=e("hr",null,null,-1)),e("div",he,[t[45]||(t[45]=e("strong",null,"Total:",-1)),e("strong",ye,"UGX "+n(l.formatPrice(l.total)),1)])]),e("button",{onClick:t[17]||(t[17]=(...o)=>l.processOrder&&l.processOrder(...o)),disabled:!l.canCheckout||s.processing,class:"btn btn-primary w-100 btn-lg"},[s.processing?(m(),d("span",ge)):(m(),d("i",xe)),c(" "+n(s.processing?"Processing...":`Pay UGX ${l.formatPrice(l.total)}`),1)],8,ve),t[47]||(t[47]=e("div",{class:"text-center mt-3"},[e("small",{class:"text-muted"},[e("i",{class:"fas fa-shield-alt me-1"}),c(" Your payment is secure and encrypted ")])],-1))])])])])]),s.showSuccessModal?(m(),d("div",Ie,[e("div",ke,[e("div",Me,[t[51]||(t[51]=e("div",{class:"modal-header border-0"},[e("h5",{class:"modal-title"},"Order Confirmed! ðŸŽ‰")],-1)),e("div",we,[t[49]||(t[49]=e("i",{class:"fas fa-check-circle fa-4x text-success mb-3"},null,-1)),t[50]||(t[50]=e("h4",{class:"text-success mb-3"},"Thank You for Your Order!",-1)),e("p",_e,"Order #"+n(s.orderId),1),e("p",Ce,"A confirmation email has been sent to "+n(s.customerInfo.email),1)]),e("div",Se,[e("button",{onClick:t[18]||(t[18]=(...o)=>l.continueShopping&&l.continueShopping(...o)),class:"btn btn-primary"}," Continue Shopping "),e("button",{onClick:t[19]||(t[19]=(...o)=>l.viewOrder&&l.viewOrder(...o)),class:"btn btn-outline-primary"}," View Order Details ")])])]),t[52]||(t[52]=e("div",{class:"modal-backdrop fade show"},null,-1))])):u("",!0)])}const Oe=b(g,[["render",Ne],["__scopeId","data-v-8335eaa9"]]);export{Oe as default};
