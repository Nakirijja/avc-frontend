import{_ as u,i as v,a as i,o as n,b as e,F as r,r as d,t as o,n as l,m as h,j as g,w as f,p as m}from"./index-DSpDc2Ld.js";const b={name:"DashboardView",data(){return{user:null,loading:!0,stats:[],quickActions:[{title:"Choir Members",description:"Manage choir members",icon:"fas fa-users",link:"/choir-members"},{title:"Attendance",description:"Track attendance",icon:"fas fa-clipboard-check",link:"/attendance"},{title:"Virtual Practice",description:"Online rehearsals",icon:"fas fa-video",link:"/virtual-practice"},{title:"Events",description:"View events",icon:"fas fa-calendar",link:"/events"},{title:"Donations",description:"Manage donations",icon:"fas fa-donate",link:"/donations"},{title:"Gallery",description:"Photo gallery",icon:"fas fa-images",link:"/gallery"}],recentActivity:[]}},async mounted(){await this.loadDashboardData()},methods:{async loadDashboardData(){this.loading=!0;try{const s=await m.dashboard.getStats(),a=await m.dashboard.getActivity();this.stats=this.transformStatsData(s.data),this.recentActivity=a.data.recent_activity||[]}catch(s){console.error("Dashboard API Error:",s),this.useFallbackData()}finally{this.loading=!1}},transformStatsData(s){return[{title:"Total Members",value:s.total_members?.toString()||"0",change:`+${s.new_members||0} this month`,changeType:"positive",icon:"fas fa-users"},{title:"Upcoming Events",value:s.upcoming_events?.toString()||"0",change:s.next_event||"Next: None",changeType:"neutral",icon:"fas fa-calendar"},{title:"Donations",value:`UGX ${(s.total_donations||0).toLocaleString()}`,change:`${s.donation_change||"+0%"} from last month`,changeType:s.donation_change?.includes("-")?"negative":"positive",icon:"fas fa-donate"},{title:"Attendance Rate",value:`${s.attendance_rate||"0"}%`,change:`Last practice: ${s.last_attendance||"0%"}`,changeType:"neutral",icon:"fas fa-clipboard-check"}]},useFallbackData(){console.log("Using fallback data - API not available"),this.stats=[{title:"Total Members",value:"45",change:"+2 this month",changeType:"positive",icon:"fas fa-users"},{title:"Upcoming Events",value:"3",change:"Next: Concert",changeType:"neutral",icon:"fas fa-calendar"},{title:"Donations",value:"UGX 1,250,000",change:"+10% from last month",changeType:"positive",icon:"fas fa-donate"},{title:"Attendance Rate",value:"87%",change:"Last practice: 90%",changeType:"neutral",icon:"fas fa-clipboard-check"}],this.recentActivity=[{id:1,message:"New member registered: John Doe",time:"2 hours ago",icon:"fas fa-user-plus"},{id:2,message:"Donation received: UGX 50,000",time:"Yesterday",icon:"fas fa-donate"},{id:3,message:"Event created: Christmas Concert",time:"2 days ago",icon:"fas fa-calendar"}]}}},p={class:"dashboard-page"},y={key:0,class:"text-center py-5"},x={key:1,class:"dashboard-content"},k={class:"row mb-5"},w={class:"card h-100 border-0 shadow-sm"},A={class:"card-body"},T={class:"d-flex align-items-center"},D={class:"flex-grow-1"},N={class:"card-title text-muted mb-2"},S={class:"mb-0"},C={class:"flex-shrink-0"},E={class:"row"},U={class:"col-lg-8 mb-4"},V={class:"card border-0 shadow-sm"},L={class:"card-body"},M={class:"row g-3"},R={class:"quick-action-card text-center p-3 border rounded shadow-sm h-100"},F={class:"fw-semibold"},G={class:"text-muted small mb-2"},P={class:"col-lg-4"},$={class:"card border-0 shadow-sm"},q={class:"card-body"},B={key:0,class:"text-center text-muted py-4"},I={key:1},X={class:"activity-icon me-3"},j={class:"flex-grow-1"},z={class:"mb-1 small"},J={class:"text-muted"};function O(s,a,Q,Y,c,H){const _=v("router-link");return n(),i("div",p,[c.loading?(n(),i("div",y,[...a[0]||(a[0]=[e("div",{class:"spinner-border text-primary",role:"status"},null,-1),e("p",{class:"text-muted mt-3"},"Loading dashboard data...",-1)])])):(n(),i("div",x,[e("div",k,[(n(!0),i(r,null,d(c.stats,t=>(n(),i("div",{class:"col-md-3 mb-3",key:t.title},[e("div",w,[e("div",A,[e("div",T,[e("div",D,[e("h6",N,o(t.title),1),e("h3",S,o(t.value),1),e("small",{class:l({"text-success":t.changeType==="positive","text-danger":t.changeType==="negative","text-muted":!t.change})},o(t.change),3)]),e("div",C,[e("i",{class:l([t.icon,"text-primary fa-2x"])},null,2)])])])])]))),128))]),e("div",E,[e("div",U,[e("div",V,[a[2]||(a[2]=e("div",{class:"card-header bg-white"},[e("h5",{class:"card-title mb-0"},[e("i",{class:"fas fa-bolt me-2"}),h("Quick Actions ")])],-1)),e("div",L,[e("div",M,[(n(!0),i(r,null,d(c.quickActions,t=>(n(),i("div",{class:"col-sm-6 col-md-4",key:t.title},[e("div",R,[e("i",{class:l([t.icon,"text-primary fa-2x mb-3"])},null,2),e("h6",F,o(t.title),1),e("p",G,o(t.description),1),g(_,{to:t.link,class:"btn btn-sm btn-outline-primary w-100"},{default:f(()=>[...a[1]||(a[1]=[h(" Access ",-1)])]),_:1},8,["to"])])]))),128))])])])]),e("div",P,[e("div",$,[a[4]||(a[4]=e("div",{class:"card-header bg-white"},[e("h5",{class:"card-title mb-0"},[e("i",{class:"fas fa-clock me-2"}),h("Recent Activity ")])],-1)),e("div",q,[c.recentActivity.length===0?(n(),i("div",B,[...a[3]||(a[3]=[e("i",{class:"fas fa-inbox fa-2x mb-3"},null,-1),e("p",null,"No recent activity",-1)])])):(n(),i("div",I,[(n(!0),i(r,null,d(c.recentActivity,t=>(n(),i("div",{key:t.id,class:"activity-item d-flex mb-3"},[e("div",X,[e("i",{class:l([t.icon,"text-success"])},null,2)]),e("div",j,[e("p",z,o(t.message),1),e("small",J,o(t.time),1)])]))),128))]))])])])])]))])}const W=u(b,[["render",O],["__scopeId","data-v-6e599e41"]]);export{W as default};
